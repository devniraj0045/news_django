{% extends 'news/dashboard/base_dashboard.html' %}

{% block dashboard_content %}
<h1>Dashboard Overview</h1>
<div
    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
    <div style="background: #f3f4f6; padding: 1.5rem; border-radius: 8px;">
        <h3>Total Articles</h3>
        <p style="font-size: 2rem; font-weight: bold; margin: 0;">{{ total_articles }}</p>
    </div>
    <div style="background: #f3f4f6; padding: 1.5rem; border-radius: 8px;">
        <h3>Total Views</h3>
        <p style="font-size: 2rem; font-weight: bold; margin: 0;">{{ total_views }}</p>
    </div>
</div>

<h3 style="margin-top: 2rem;">Recent Articles</h3>
<table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
    <thead>
        <tr style="text-align: left; background: #f9fafb;">
            <th style="padding: 0.5rem;">Title</th>
            <th style="padding: 0.5rem;">Date</th>
            <th style="padding: 0.5rem;">Status</th>
        </tr>
    </thead>
    <tbody>
        {% for article in recent_articles %}
        <tr style="border-bottom: 1px solid #eee;">
            <td style="padding: 0.5rem;">{{ article.title }}</td>
            <td style="padding: 0.5rem;">{{ article.created_at|date:"M d" }}</td>
            <td style="padding: 0.5rem;">{{ article.status }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<h3 style="margin-top: 2rem;">Recent Comments</h3>
<table style="width: 100%; border-collapse: collapse; margin-top: 1rem;">
    <thead>
        <tr style="text-align: left; background: #f9fafb;">
            <th style="padding: 0.5rem;">Author</th>
            <th style="padding: 0.5rem;">Comment</th>
            <th style="padding: 0.5rem;">Date</th>
        </tr>
    </thead>
    <tbody>
        {% for comment in recent_comments %}
        <tr style="border-bottom: 1px solid #eee;">
            <td style="display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem;">
                <img src="https://ui-avatars.com/api/?name={{ comment.name }}&background=random&color=fff&size=32"
                    alt="{{ comment.name }}" style="width: 32px; height: 32px; border-radius: 50%;">
                {{ comment.name }}
            </td>
            <td style="padding: 0.5rem;">{{ comment.body|truncatechars:40 }}</td>
            <td style="padding: 0.5rem;">{{ comment.created_at|date:"M d" }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}