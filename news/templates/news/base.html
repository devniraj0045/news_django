<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}News Portal{% endblock %}</title>
    <style>
        :root {
            --primary: #dc2626;
            /* News Red */
            --dark: #1f2937;
            --light: #f3f4f6;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            background: var(--light);
        }

        a {
            text-decoration: none;
            color: inherit;
        }

        /* Header */
        header {
            background: white;
            border-bottom: 4px solid var(--primary);
        }

        .top-bar {
            background: var(--dark);
            color: white;
            padding: 0.5rem 2rem;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
        }

        .main-header {
            padding: 1.5rem 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            font-size: 2rem;
            font-weight: 900;
            color: var(--primary);
        }

        .nav-menu {
            background: var(--dark);
            color: white;
            padding: 0 2rem;
        }

        .nav-menu ul {
            list-style: none;
            display: flex;
            margin: 0;
            padding: 0;
            overflow-x: auto;
        }

        .nav-menu li a {
            display: block;
            padding: 1rem 1.5rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .nav-menu li a:hover {
            background: var(--primary);
        }

        /* Container */
        .container {
            max-width: 95%;
            margin: 0 auto;
            padding: 2rem 1rem;
        }

        /* Footer */
        footer {
            background: var(--dark);
            color: white;
            padding: 3rem 2rem;
            margin-top: 3rem;
            text-align: center;
        }

        /* Utility */
        .badge {
            background: var(--primary);
            color: white;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .text-muted {
            color: #6b7280;
        }
    </style>
    {% block extra_css %}{% endblock %}
</head>

<body>
    <header>
        <div class="top-bar">
            <span>{{ now|date:"l, M d, Y" }}</span>
            <div id="google_translate_element"></div>
        </div>
        <script type="text/javascript">
            function googleTranslateElementInit() {
                new google.translate.TranslateElement({
                    pageLanguage: 'ne',
                    includedLanguages: 'en,ne,bho,mai',
                    layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL,
                    autoDisplay: false
                }, 'google_translate_element');
            }
        </script>
        <script type="text/javascript"
            src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

        <style>
            /* Hide Google Bar */
            .goog-te-banner-frame {
                display: none !important;
            }

            body {
                top: 0 !important;
            }

            /* Style the widget */
            .goog-te-gadget-simple {
                background-color: transparent !important;
                border: none !important;
                font-size: 0.9rem !important;
            }

            .goog-te-gadget-simple .goog-te-menu-value {
                color: white !important;
            }

            .goog-te-gadget-simple .goog-te-menu-value span {
                color: white !important;
                border-left: none !important;
            }

            .goog-te-gadget-icon {
                display: none !important;
            }
        </style>
        <div class="main-header">
            <a href="/" class="logo">
                {% if site_config.logo %}
                <img src="{{ site_config.logo.url }}" alt="{{ site_config.site_name }}" style="max-height: 50px;">
                {% else %}
                {{ site_config.site_name }}
                {% endif %}
            </a>
            <!-- Simple Search Placeholder -->
            <input type="text" placeholder="Search news..."
                style="padding: 0.5rem; border: 1px solid #ddd; border-radius: 4px;">
        </div>
        <nav class="nav-menu">
            <div class="container" style="padding:0; margin:0 auto; max-width: 95%;">
                <ul>
                    <li><a href="/">Home</a></li>
                    {% for cat in categories %}
                    <li><a href="{% url 'category_detail' cat.slug %}">{{ cat.name }}</a></li>
                    {% empty %}
                    <!-- Fallback if categories not in context -->
                    <li><a href="#">Politics</a></li>
                    <li><a href="#">Business</a></li>
                    <li><a href="#">Sports</a></li>
                    <li><a href="#">Tech</a></li>
                    {% endfor %}
                </ul>
            </div>
        </nav>

        <!-- Breaking News Ticker -->
        <div style="background: #fee2e2; color: #991b1b; padding: 0.5rem; display: flex; align-items: center;">
            <div class="container"
                style="padding: 0; display: flex; align-items: center; max-width: 95%; margin: 0 auto;">
                <span class="badge" style="margin-right: 1rem; flex-shrink: 0;">Breaking News</span>
                <marquee scrollamount="6" style="font-weight: 600;">
                    {{ site_config.breaking_news_content }}
                </marquee>
            </div>
        </div>
    </header>

    <div class="container">
        {% block content %}{% endblock %}
    </div>

    <footer>
        <div class="container" style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap;">
            <div>
                <p>{{ site_config.footer_text }}</p>
                {% if site_config.contact_email %}<small>Email: {{ site_config.contact_email }}</small>{% endif %}
                {% if site_config.contact_phone %}<br><small>Phone: {{ site_config.contact_phone }}</small>{% endif %}
            </div>
            <div class="social-links">
                {% if site_config.facebook_url %}<a href="{{ site_config.facebook_url }}" target="_blank"
                    style="margin-left:1rem; color:white;"><i class="fab fa-facebook"></i></a>{% endif %}
                {% if site_config.twitter_url %}<a href="{{ site_config.twitter_url }}" target="_blank"
                    style="margin-left:1rem; color:white;"><i class="fab fa-twitter"></i></a>{% endif %}
                {% if site_config.youtube_url %}<a href="{{ site_config.youtube_url }}" target="_blank"
                    style="margin-left:1rem; color:white;"><i class="fab fa-youtube"></i></a>{% endif %}
            </div>
        </div>
    </footer>
</body>

</html>